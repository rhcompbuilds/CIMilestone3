{% extends "base.html" %}
{% block title %}Session Bookings{% endblock %}
{% block content %}
  <h2>Bookings for {{ session.session_day }} at {{ session.start_time }}</h2>

  <table>
    <tr>
      <th>Guest</th>
      <th>Caravan</th>
      <th>People</th>
      <th>Email</th>
      <th>Attended</th>
      <th>Actions</th>
    </tr>
    {% for booking in bookings %}
    <tr>
      <td>{{ booking.first_name }} {{ booking.last_name }}</td>
      <td>{{ booking.caravan_number }}</td>
      <td>{{ booking.number_of_people }}</td>
      <td>{{ booking.email }}</td>
      <td>{{ booking.attended }}</td>
      <td>
        <!-- Form for Mark Attended -->
        <form action="{% url 'mark_attended' %}" method="post" style="display:inline;">
          {% csrf_token %}
          <!-- Pass the booking ID in a hidden input -->
          <input type="hidden" name="booking_id" value="{{ booking.id }}">
          <button type="submit">Mark Attended</button>
        </form>
        
        <!-- Form for Release -->
        <form action="{% url 'release_booking' %}" method="post" style="display:inline;">
          {% csrf_token %}
          <!-- Pass the booking ID in a hidden input -->
          <input type="hidden" name="booking_id" value="{{ booking.id }}">
          <button type="submit">Release</button>
        </form>
        
        <a href="{% url 'cancel_booking' booking.id %}">
          <button type="button">Cancel</button>
        </a>
      </td>
    </tr>
    {% endfor %}
  </table>
{% endblock %}
